<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Clone - Fixed</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Helvetica, Arial, sans-serif;
        }
        
        body {
            background-color: #3b4a54;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            height: 90vh;
            background-color: #fff;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        /* Sidebar styling */
        .sidebar {
            width: 30%;
            background-color: #f0f2f5;
            border-right: 1px solid #e6e6e6;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 10px 16px;
            background-color: #f0f2f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e6e6e6;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #25D366;
            margin-right: 10px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
        }
        
        .sidebar-icons {
            color: #54656f;
            display: flex;
            gap: 20px;
        }
        
        .sidebar-icons i {
            cursor: pointer;
            font-size: 18px;
        }
        
        .search-container {
            padding: 8px 15px;
            background-color: #fff;
            border-bottom: 1px solid #e6e6e6;
        }
        
        .search-box {
            background-color: #f0f2f5;
            border-radius: 18px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
        }
        
        .search-box i {
            color: #54656f;
            margin-right: 10px;
        }
        
        .search-box input {
            border: none;
            background: transparent;
            width: 100%;
            outline: none;
            font-size: 14px;
        }
        
        .contacts {
            flex: 1;
            overflow-y: auto;
        }
        
        .contact {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f0f2f5;
        }
        
        .contact:hover {
            background-color: #f5f5f5;
        }
        
        .contact.active {
            background-color: #e9ebeb;
        }
        
        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ddd;
            margin-right: 15px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #555;
        }
        
        .contact-info {
            flex: 1;
        }
        
        .contact-name {
            font-size: 16px;
            font-weight: 500;
            color: #000;
        }
        
        .contact-message {
            font-size: 14px;
            color: #667781;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
        }
        
        .message-info {
            text-align: right;
        }
        
        .message-time {
            font-size: 12px;
            color: #667781;
            margin-bottom: 5px;
        }
        
        .message-count {
            display: inline-block;
            background-color: #25d366;
            color: white;
            font-size: 12px;
            padding: 0 5px;
            border-radius: 50%;
            min-width: 20px;
            text-align: center;
            height: 20px;
            line-height: 20px;
        }
        
        /* Chat area styling */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: #efeae2;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23f1f1f1' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .chat-header {
            padding: 10px 16px;
            background-color: #f0f2f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e6e6e6;
        }
        
        .chat-info {
            display: flex;
            align-items: center;
        }
        
        .chat-status {
            display: flex;
            flex-direction: column;
            margin-left: 15px;
        }
        
        .chat-name {
            font-size: 16px;
            font-weight: 500;
        }
        
        .status {
            font-size: 13px;
            color: #667781;
        }
        
        .chat-icons {
            color: #54656f;
            display: flex;
            gap: 20px;
        }
        
        .chat-icons i {
            cursor: pointer;
            font-size: 18px;
        }
        
        .messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 65%;
            padding: 8px 12px;
            margin-bottom: 8px;
            border-radius: 7.5px;
            position: relative;
            word-wrap: break-word;
        }
        
        .message-time-stamp {
            font-size: 11px;
            color: #667781;
            text-align: right;
            margin-top: 2px;
        }
        
        .received {
            align-self: flex-start;
            background-color: #fff;
            border-top-left-radius: 0;
        }
        
        .sent {
            align-self: flex-end;
            background-color: #d9fdd3;
            border-top-right-radius: 0;
        }
        
        .input-area {
            padding: 10px 16px;
            background-color: #f0f2f5;
            display: flex;
            align-items: center;
            border-top: 1px solid #e6e6e6;
        }
        
        .input-area i {
            color: #54656f;
            font-size: 20px;
            cursor: pointer;
            margin: 0 10px;
        }
        
        .message-input {
            flex: 1;
            background-color: #fff;
            border-radius: 20px;
            border: none;
            padding: 9px 15px;
            font-size: 15px;
            outline: none;
        }
        
        .send-button {
            background-color: #25d366;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        /* Payment modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            width: 400px;
            max-width: 90%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-modal {
            font-size: 24px;
            cursor: pointer;
        }
        
        .credit-packages {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .credit-package {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .credit-package.selected {
            border-color: #25d366;
            background-color: rgba(37, 211, 102, 0.1);
        }
        
        .payment-button {
            background-color: #25d366;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            width: 100%;
            font-size: 16px;
            cursor: pointer;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
            
            .sidebar {
                width: 100%;
                display: none;
            }
            
            .chat-area {
                width: 100%;
            }
            
            .sidebar.active {
                display: flex;
            }
            
            .chat-area.hidden {
                display: none;
            }
        }
        
        /* System status indicator */
        .system-status {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background-color: #25d366;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar with contacts -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="avatar">U</div>
                    <span>Your Name</span>
                </div>
                <div class="sidebar-icons">
                    <i class="fas fa-circle"></i>
                    <i class="fas fa-comment"></i>
                    <i class="fas fa-ellipsis-v"></i>
                </div>
            </div>
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search or start new chat">
                </div>
            </div>
            <div class="contacts">
                <div class="contact active">
                    <div class="contact-avatar">J</div>
                    <div class="contact-info">
                        <div class="contact-name">John Doe</div>
                        <div class="contact-message">Hey, how are you?</div>
                    </div>
                    <div class="message-info">
                        <div class="message-time">10:30 AM</div>
                        <div class="message-count">3</div>
                    </div>
                </div>
                <div class="contact">
                    <div class="contact-avatar">J</div>
                    <div class="contact-info">
                        <div class="contact-name">Jane Smith</div>
                        <div class="contact-message">See you tomorrow!</div>
                    </div>
                    <div class="message-info">
                        <div class="message-time">Yesterday</div>
                    </div>
                </div>
                <div class="contact">
                    <div class="contact-avatar">A</div>
                    <div class="contact-info">
                        <div class="contact-name">Alice Johnson</div>
                        <div class="contact-message">Did you finish the project?</div>
                    </div>
                    <div class="message-info">
                        <div class="message-time">Yesterday</div>
                        <div class="message-count">1</div>
                    </div>
                </div>
                <div class="contact">
                    <div class="contact-avatar">B</div>
                    <div class="contact-info">
                        <div class="contact-name">Bob Williams</div>
                        <div class="contact-message">Let's meet for coffee</div>
                    </div>
                    <div class="message-info">
                        <div class="message-time">Wednesday</div>
                    </div>
                </div>
                <div class="contact">
                    <div class="contact-avatar">E</div>
                    <div class="contact-info">
                        <div class="contact-name">Eva Davis</div>
                        <div class="contact-message">The meeting is canceled</div>
                    </div>
                    <div class="message-info">
                        <div class="message-time">Tuesday</div>
                    </div>
                </div>
                <div class="contact">
                    <div class="contact-avatar">M</div>
                    <div class="contact-info">
                        <div class="contact-name">Mike Wilson</div>
                        <div class="contact-message">Check this out!</div>
                    </div>
                    <div class="message-info">
                        <div class="message-time">Monday</div>
                        <div class="message-count">5</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chat area -->
        <div class="chat-area">
            <div class="chat-header">
                <div class="chat-info">
                    <div class="avatar">J</div>
                    <div class="chat-status">
                        <div class="chat-name">John Doe</div>
                        <div class="status">online</div>
                    </div>
                </div>
                <div class="chat-icons">
                    <i class="fas fa-search"></i>
                    <i class="fas fa-paperclip"></i>
                    <i class="fas fa-ellipsis-v"></i>
                </div>
            </div>
            <div class="messages">
                <div class="message received">
                    <div class="message-text">Hey there!</div>
                    <div class="message-time-stamp">10:15 AM</div>
                </div>
                <div class="message sent">
                    <div class="message-text">Hi! How are you?</div>
                    <div class="message-time-stamp">10:16 AM</div>
                </div>
                <div class="message received">
                    <div class="message-text">I'm good, thanks! How about you?</div>
                    <div class="message-time-stamp">10:20 AM</div>
                </div>
                <div class="message sent">
                    <div class="message-text">I'm doing great. What are you up to today?</div>
                    <div class="message-time-stamp">10:22 AM</div>
                </div>
                <div class="message received">
                    <div class="message-text">Just working on some projects. How about you?</div>
                    <div class="message-time-stamp">10:25 AM</div>
                </div>
                <div class="message sent">
                    <div class="message-text">Same here, just coding away! 😊</div>
                    <div class="message-time-stamp">10:26 AM</div>
                </div>
                <div class="message received">
                    <div class="message-text">That's cool! What are you working on?</div>
                    <div class="message-time-stamp">10:30 AM</div>
                </div>
            </div>
            <div class="input-area">
                <i class="far fa-smile"></i>
                <i class="fas fa-paperclip"></i>
                <input type="text" class="message-input" placeholder="Type a message">
                <i class="fas fa-microphone"></i>
                <div class="send-button">
                    <i class="fas fa-paper-plane"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="payment-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Buy Credits</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="credit-packages">
                <div class="credit-package">
                    <div>
                        <h3>5 Credits</h3>
                        <p>For basic chatroom access</p>
                    </div>
                    <div>$4.99</div>
                </div>
                <div class="credit-package selected">
                    <div>
                        <h3>15 Credits</h3>
                        <p>Most popular option</p>
                    </div>
                    <div>$12.99</div>
                </div>
                <div class="credit-package">
                    <div>
                        <h3>30 Credits</h3>
                        <p>Best value</p>
                    </div>
                    <div>$24.99</div>
                </div>
            </div>
            <button class="payment-button">Pay with Secure Payment</button>
        </div>
    </div>

    <!-- System Status Indicator -->
    <div class="system-status">
        <div class="status-dot"></div>
        <span>System Online</span>
    </div>

    <script>
        // DOM elements
        const contactsContainer = document.querySelector('.contacts');
        const messagesContainer = document.querySelector('.messages');
        const messageInput = document.querySelector('.message-input');
        const sendButton = document.querySelector('.send-button');
        const attachButton = document.querySelector('.fa-paperclip');
        const paymentModal = document.getElementById('payment-modal');
        const closeModal = document.querySelector('.close-modal');
        const creditPackages = document.querySelectorAll('.credit-package');
        const paymentButton = document.querySelector('.payment-button');
        const contacts = document.querySelectorAll('.contact');

        // Add event listeners to contacts
        contacts.forEach(contact => {
            contact.addEventListener('click', () => {
                document.querySelectorAll('.contact').forEach(c => c.classList.remove('active'));
                contact.classList.add('active');
                
                // Update chat header with contact name
                const contactName = contact.querySelector('.contact-name').textContent;
                document.querySelector('.chat-name').textContent = contactName;
                
                // Update avatar with contact initial
                const avatarInitial = contactName.charAt(0);
                document.querySelector('.chat-info .avatar').textContent = avatarInitial;
                
                // Clear unread messages
                const unreadCount = contact.querySelector('.message-count');
                if (unreadCount) {
                    unreadCount.remove();
                }
            });
        });

        // Send message functionality
        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;
            
            // Get current time
            const now = new Date();
            const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            // Create new message element
            const messageEl = document.createElement('div');
            messageEl.classList.add('message', 'sent');
            messageEl.innerHTML = `
                <div class="message-text">${text}</div>
                <div class="message-time-stamp">${time}</div>
            `;
            
            // Add to messages container
            messagesContainer.appendChild(messageEl);
            
            // Clear input
            messageInput.value = '';
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Simulate reply after a delay
            setTimeout(simulateReply, 1000);
        }

        function simulateReply() {
            const replies = [
                "That's interesting!",
                "I see what you mean.",
                "Tell me more about that.",
                "I agree with you.",
                "Thanks for letting me know!",
                "I'll get back to you on that.",
                "Can we talk about this later?",
                "I appreciate your thoughts on this."
            ];
            
            const randomReply = replies[Math.floor(Math.random() * replies.length)];
            
            const now = new Date();
            const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            // Create reply message element
            const messageEl = document.createElement('div');
            messageEl.classList.add('message', 'received');
            messageEl.innerHTML = `
                <div class="message-text">${randomReply}</div>
                <div class="message-time-stamp">${time}</div>
            `;
            
            // Add to messages container
            messagesContainer.appendChild(messageEl);
            
            // Update contact list with new message
            const activeContact = document.querySelector('.contact.active');
            if (activeContact) {
                activeContact.querySelector('.contact-message').textContent = randomReply;
                activeContact.querySelector('.message-time').textContent = time;
                
                // Add unread count if not active
                if (!activeContact.classList.contains('active')) {
                    let unreadCount = activeContact.querySelector('.message-count');
                    if (!unreadCount) {
                        unreadCount = document.createElement('div');
                        unreadCount.classList.add('message-count');
                        activeContact.querySelector('.message-info').appendChild(unreadCount);
                    }
                    unreadCount.textContent = (parseInt(unreadCount.textContent || '0') + 1).toString();
                }
            }
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Payment modal functionality
        attachButton.addEventListener('click', () => {
            paymentModal.style.display = 'flex';
        });

        closeModal.addEventListener('click', () => {
            paymentModal.style.display = 'none';
        });

        creditPackages.forEach(pkg => {
            pkg.addEventListener('click', () => {
                creditPackages.forEach(p => p.classList.remove('selected'));
                pkg.classList.add('selected');
            });
        });

        paymentButton.addEventListener('click', () => {
            alert('Payment processed successfully! Credits added to your account.');
            paymentModal.style.display = 'none';
        });

        // Close modal if clicked outside
        window.addEventListener('click', (e) => {
            if (e.target === paymentModal) {
                paymentModal.style.display = 'none';
            }
        });

        // Scroll messages to bottom on load
        window.addEventListener('load', () => {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        });
    </script>
</body>
</html>
